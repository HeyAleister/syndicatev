<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marktplatz</title>
    <style>
        /* Allgemeines Styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
        }

        /* Sidebar-Design (HUD) */
        .sidebar {
            width: 250px;
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar ul li {
            margin-bottom: 15px;
        }

        .sidebar ul li a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .sidebar ul li a:hover {
            background-color: #34495e;
        }

        /* Hauptbereich */
        .main-content {
            flex-grow: 1;
            padding: 20px;
            background-color: #ecf0f1;
            display: none; /* Wird ausgeblendet, bis die Kategorie angezeigt wird */
        }

        .main-content.active {
            display: block; /* Aktiviert die Ansicht der Kategorie oder des Warenkorbs */
        }

        .main-content h1 {
            margin-bottom: 20px;
            text-align: center;
        }

        /* Produktliste */
        #product-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }

        .product {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 10px;
            width: 30%;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .product h3 {
            margin-bottom: 10px;
        }

        .product p {
            margin-bottom: 20px;
            font-size: 16px;
        }

        .product button {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .product button:hover {
            background-color: #2ecc71;
        }

        /* Warenkorb */
        #cart {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        #cart h2 {
            margin-bottom: 15px;
        }

        #cart-items {
            list-style-type: none;
            padding: 0;
        }

        #cart-items li {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #cart-items li button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        #cart-items li button:hover {
            background-color: #c0392b;
        }

        #cart button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
            transition: background 0.3s;
        }

        #cart button:hover {
            background-color: #2980b9;
        }

        /* Rechnung */
        #invoice {
            margin-top: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: none;
        }

        #invoice ul {
            list-style-type: none;
            padding: 0;
        }

        #invoice ul li {
            margin-bottom: 10px;
        }

        /* Bestellungen */
        #orders-view {
            margin-top: 20px;
        }

        #orders-view h2 {
            text-align: center;
        }

        #orders-list {
            list-style-type: none;
            padding: 0;
        }

        #orders-list li {
            margin: 10px 0;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Passwort Eingabe */
        #password-form {
            display: none;
            margin-top: 20px;
        }

        #password-form input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: calc(100% - 22px);
            margin-bottom: 10px;
        }

        #password-form button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
            transition: background 0.3s;
        }

        #password-form button:hover {
            background-color: #2980b9;
        }

        /* Bestellung anzeigen Button */
        .show-order-details {
            background-color: #f39c12;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        .show-order-details:hover {
            background-color: #e67e22;
        }

        /* Statusauswahl */
        .status-select {
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <!-- Sidebar (HUD) -->
    <div class="sidebar">
        <h2>Kategorien</h2>
        <ul>
            <li><a href="#" class="category" data-category="alle">Alle Produkte</a></li>
            <li><a href="#" class="category" data-category="elektronik">Elektronik</a></li>
            <li><a href="#" class="category" data-category="kleidung">Kleidung</a></li>
            <li><a href="#" class="category" data-category="lebensmittel">Lebensmittel</a></li>
            <li><a href="#" class="category" data-category="warenkorb">Warenkorb</a></li>
            <li><a href="#" class="category" data-category="bestellungen">Bestellungen</a></li>
        </ul>
    </div>

    <!-- Hauptinhalt -->
    <div id="product-view" class="main-content">
        <h1>Produkte</h1>
        <section id="product-list">
            <!-- Hier werden die Produkte dynamisch hinzugefügt -->
        </section>
    </div>

    <!-- Warenkorb -->
    <div id="cart-view" class="main-content">
        <h1>Warenkorb</h1>
        <aside id="cart">
            <h2>Ihr Warenkorb</h2>
            <ul id="cart-items">
                <!-- Produkte im Warenkorb -->
            </ul>
            <p><strong>Gesamtpreis: €<span id="total-price">0.00</span></strong></p>
            <label for="order-name">Bestellname:</label>
            <input type="text" id="order-name" placeholder="Geben Sie einen Namen für die Bestellung ein">
            <label for="contact">Kontakt:</label>
            <input type="text" id="contact" placeholder="Geben Sie Kontaktinformationen ein">
            <button id="checkout">Kaufen</button>
        </aside>

        <!-- Rechnung -->
        <div id="invoice">
            <h2>Rechnung</h2>
            <p>Vielen Dank für Ihren Einkauf!</p>
            <ul id="invoice-items">
                <!-- Gekaufte Produkte -->
            </ul>
            <p><strong>Endpreis: €<span id="invoice-total-price">0.00</span></strong></p>
        </div>
    </div>

    <!-- Bestellungen -->
    <div id="orders-view" class="main-content">
        <h1>Gespeicherte Bestellungen</h1>
        <div id="password-form">
            <input type="password" id="password" placeholder="Passwort eingeben">
            <button id="submit-password">Anzeigen</button>
        </div>
        <ul id="orders-list">
            <!-- Gespeicherte Bestellungen werden hier angezeigt -->
        </ul>
    </div>

    <script>
        let products = [
            { id: 1, name: 'Laptop', price: 899.99, category: 'elektronik' },
            { id: 2, name: 'Smartphone', price: 499.99, category: 'elektronik' },
            { id: 3, name: 'T-Shirt', price: 19.99, category: 'kleidung' },
            { id: 4, name: 'Hose', price: 39.99, category: 'kleidung' },
            { id: 5, name: 'Äpfel', price: 2.99, category: 'lebensmittel' },
            { id: 6, name: 'Brot', price: 1.99, category: 'lebensmittel' }
        ];

        let cart = [];
        let orders = [];
        const password = 'passwort123'; // Einfaches Passwort für den Zugriff auf Bestellungen

        // Produkte anzeigen
        function displayProducts(category) {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';

            const filteredProducts = products.filter(product => category === 'alle' || product.category === category);
            filteredProducts.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'product';
                productElement.innerHTML = `
                    <h3>${product.name}</h3>
                    <p>Preis: €${product.price.toFixed(2)}</p>
                    <button onclick="addToCart(${product.id})">In den Warenkorb</button>
                `;
                productList.appendChild(productElement);
            });
        }

        // Produkt in den Warenkorb legen
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            cart.push(product);
            updateCart();
        }

        // Produkt aus dem Warenkorb entfernen
        function removeFromCart(productId) {
            cart = cart.filter(product => product.id !== productId);
            updateCart();
        }

        // Warenkorb aktualisieren
        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            const totalPriceElement = document.getElementById('total-price');
            cartItems.innerHTML = ''; // Leert die Warenkorbliste
            let totalPrice = 0;

            cart.forEach(product => {
                const cartItem = document.createElement('li');
                cartItem.innerHTML = `
                    ${product.name} - €${product.price.toFixed(2)}
                    <button onclick="removeFromCart(${product.id})">Entfernen</button>
                `;
                cartItems.appendChild(cartItem);
                totalPrice += product.price;
            });

            totalPriceElement.innerText = totalPrice.toFixed(2);
        }

        // Kauf abschließen und Rechnung anzeigen
        document.getElementById('checkout').addEventListener('click', () => {
            const orderName = document.getElementById('order-name').value;
            const contact = document.getElementById('contact').value;

            if (cart.length === 0) {
                alert('Ihr Warenkorb ist leer. Bitte fügen Sie Produkte hinzu, bevor Sie kaufen.');
                return;
            }
            if (!orderName) {
                alert('Bitte geben Sie einen Namen für die Bestellung ein.');
                return;
            }
            if (!contact) {
                alert('Bitte geben Sie Kontaktinformationen ein.');
                return;
            }

            const invoice = document.getElementById('invoice');
            const invoiceItems = document.getElementById('invoice-items');
            const invoiceTotalPrice = document.getElementById('invoice-total-price');

            invoiceItems.innerHTML = ''; // Leert die Rechnungsprodukte
            let totalPrice = 0;

            cart.forEach(product => {
                const invoiceItem = document.createElement('li');
                invoiceItem.innerText = `${product.name} - €${product.price.toFixed(2)}`;
                invoiceItems.appendChild(invoiceItem);
                totalPrice += product.price;
            });

            invoiceTotalPrice.innerText = totalPrice.toFixed(2);
            invoice.style.display = 'block'; // Zeigt die Rechnung an
            
            // Bestellung speichern
            const order = {
                name: orderName,
                contact: contact,
                items: cart.slice(),
                totalPrice,
                status: 'In Bearbeitung' // Standardstatus für neue Bestellungen
            };
            orders.push(order);
            cart = []; // Leert den Warenkorb
            updateCart();
        });

        // Kategorien anklicken und Produkte/Warenkorb filtern
        document.querySelectorAll('.category').forEach(categoryLink => {
            categoryLink.addEventListener('click', event => {
                event.preventDefault();
                const category = event.target.getAttribute('data-category');

                document.querySelectorAll('.main-content').forEach(content => {
                    content.classList.remove('active');
                });

                if (category === 'warenkorb') {
                    document.getElementById('cart-view').classList.add('active');
                } else if (category === 'bestellungen') {
                    const passwordForm = document.getElementById('password-form');
                    passwordForm.style.display = 'block'; // Passwort-Formular anzeigen
                    document.getElementById('orders-view').classList.add('active');
                } else {
                    document.getElementById('product-view').classList.add('active');
                    displayProducts(category);
                }
            });
        });

        // Passwort zur Anzeige der Bestellungen überprüfen
        document.getElementById('submit-password').addEventListener('click', () => {
            const inputPassword = document.getElementById('password').value;
            if (inputPassword === password) 

                orders.forEach((order, index) => {
                    const orderElement = document.createElement('li');
                    orderElement.innerHTML = `${order.name} (${order.contact}): €${order.totalPrice.toFixed(2)} 
                    <select class="status-select" onchange="updateOrderStatus(${index}, this.value)">
                        <option value="In Bearbeitung" ${order.status === 'In Bearbeitung' ? 'selected' : ''}>In Bearbeitung</option>
                        <option value="Erledigt" ${order.status === 'Erledigt' ? 'selected' : ''}>Erledigt</option>
                        <option value="Verfallen" ${order.status === 'Verfallen' ? 'selected' : ''}>Verfallen</option>
                    </select>
                    <button class="show-order-details" onclick="showOrderDetails(${index})">Details</button>
                    <button onclick="deleteOrder(${index})">Löschen</button>`;
                    ordersList.appendChild(orderElement);
                });

                document.getElementById('password-form').style.display = 'none'; // Versteckt das Passwortfeld
                updateCart(); // Update der Ansicht
            } else {
                alert('Falsches Passwort. Bitte versuchen Sie es erneut.');
            }
        });

        // Bestellung anzeigen
        function showOrderDetails(orderIndex) {
            const order = orders[orderIndex];
            const orderDetails = document.createElement('div');
            orderDetails.innerHTML = `<h3>Bestellung: ${order.name}</h3>
                <p>Kontakt: ${order.contact}</p>
                <ul>
                ${order.items.map(item => `<li>${item.name} - €${item.price.toFixed(2)}</li>`).join('')}
                </ul>
                <strong>Gesamtpreis: €${order.totalPrice.toFixed(2)}</strong>
                <strong>Status: ${order.status}</strong>`;
            document.body.appendChild(orderDetails);
        }

        // Bestellung löschen
        function deleteOrder(orderIndex) {
            orders.splice(orderIndex, 1);
            alert('Bestellung gelöscht.');
            const ordersList = document.getElementById('orders-list');
            ordersList.innerHTML = ''; // Leert die Liste der Bestellungen
            // Update der Bestellungen
            orders.forEach((order, index) => {
                const orderElement = document.createElement('li');
                orderElement.innerHTML = `${order.name} (${order.contact}): €${order.totalPrice.toFixed(2)} 
                <select class="status-select" onchange="updateOrderStatus(${index}, this.value)">
                    <option value="In Bearbeitung" ${order.status === 'In Bearbeitung' ? 'selected' : ''}>In Bearbeitung</option>
                    <option value="Erledigt" ${order.status === 'Erledigt' ? 'selected' : ''}>Erledigt</option>
                    <option value="Verfallen" ${order.status === 'Verfallen' ? 'selected' : ''}>Verfallen</option>
                </select>
                <button class="show-order-details" onclick="showOrderDetails(${index})">Details</button>
                <button onclick="deleteOrder(${index})">Löschen</button>`;
                ordersList.appendChild(orderElement);
            });
        }

        // Status der Bestellung aktualisieren
        function updateOrderStatus(orderIndex, status) {
            orders[orderIndex].status = status;
        }

        // Standardkategorie anzeigen
        displayProducts('alle');
    </script>
</body>
</html>
